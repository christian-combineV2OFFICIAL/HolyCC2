cmake_minimum_required(VERSION 3.0)
set (CMAKE_CC_STANDARD 11)

project(holycc2 LANGUAGES C)

set(sources "")
list(APPEND sources "main.c")
list(APPEND sources "linkedList.c")
list(APPEND sources "hashTable.c")
list(APPEND sources "linkedList.c")
list(APPEND sources "str.c")
list(APPEND sources "graph.c")
list(APPEND sources "diff.c")
list(APPEND sources "readersWritersLock.c")
list(APPEND sources "ext/skinny_mutex/skinny_mutex.c")
list(APPEND sources "subGraph.c")
list(APPEND sources "cyk.c")
list(APPEND sources "cacheingLexer.c")
list(APPEND sources "utf8Encode.c")
list(APPEND sources "cacheingLexerItems.c")
list(APPEND sources "stringParser.c")
list(APPEND sources "preprocessor.c")
list(APPEND sources "cykGrammarGenerator.c")
list(APPEND sources "eventPool.c")
list(APPEND sources "textMapper.c")
list(APPEND sources "serializeBase.c")
list(APPEND sources "serializeBase.c")

set(tests "")
list(APPEND tests "tests/tests.c")
list(APPEND tests "tests/linkedListTests.c")
list(APPEND tests "tests/strTests.c")
list(APPEND tests "tests/mapTests.c")
list(APPEND sources "tests/graphTests.c")
list(APPEND sources "tests/diffTests.c")
list(APPEND sources "tests/subGraphTests.c")
list(APPEND tests "tests/cykTests.c")
list(APPEND tests "tests/cacheingLexerTests.c")
list(APPEND tests "tests/preprocessorTests.c")
list(APPEND tests "tests/eventPoolTests.c")
list(APPEND tests "tests/cykGrammarGeneratorTests.c")

add_executable(holycc2 ${sources} ${tests})
target_include_directories(holycc2 PRIVATE ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/ext/skinny_mutex)
target_link_Libraries(holycc2 dill pthread)
install(TARGETS holycc2 RUNTIME DESTINATION bin)
